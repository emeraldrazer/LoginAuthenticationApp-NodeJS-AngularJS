{"ast":null,"code":"import _asyncToGenerator from \"O:/Other/Websites & APIs/login-authentication-app/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { HomeComponent } from '../home/home.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(router) {\n      this.router = router;\n    }\n    registerClick(username, password) {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        if (username.value === '' && password.value === '') {\n          return alert(\"Invalid Credentials\");\n        }\n        yield _this.Login(username, password);\n      })();\n    }\n    Login(username, password) {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        const response = yield fetch('http://localhost:3001/api/v2/login', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            username: username.value,\n            password: password.value\n          })\n        });\n        if (!response.ok) {\n          password.value = '';\n          return alert('Invalid Username or Password.');\n        }\n        const result = yield response.json();\n        username.value = '';\n        password.value = '';\n        const getUserInfo = yield fetch(`http://localhost:3001/api/v1/user/${result.result.data[0].id}`, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `${result.token}`\n          }\n        });\n        if (!getUserInfo.ok) {\n          return alert(`Couldn't get user info, Please try again later.`);\n        }\n        const userInfoResult = yield getUserInfo.json();\n        // To access user info -> userInfoResult[0].*\n        const homeComp = new HomeComponent();\n        homeComp.RetrieveInfo(userInfoResult[0]);\n        _this2.router.navigate(['/']);\n      })();\n    }\n  }\n  LoginComponent.ɵfac = function LoginComponent_Factory(t) {\n    return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.Router));\n  };\n  LoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoginComponent,\n    selectors: [[\"app-login\"]],\n    decls: 11,\n    vars: 0,\n    consts: [[1, \"login\"], [\"type\", \"any\", \"placeholder\", \"Username\", \"required\", \"\", 1, \"textarea-as-input\"], [\"username\", \"\"], [\"type\", \"password\", \"placeholder\", \"Password\", \"required\", \"\", 1, \"textarea-as-input\"], [\"password\", \"\"], [\"id\", \"loginBTN\", 1, \"myButton\", 3, \"click\"], [\"href\", \"/register\", 1, \"redirect\"]],\n    template: function LoginComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r2 = i0.ɵɵgetCurrentView();\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n        i0.ɵɵtext(2, \"Login\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(3, \"input\", 1, 2)(5, \"input\", 3, 4);\n        i0.ɵɵelementStart(7, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_7_listener() {\n          i0.ɵɵrestoreView(_r2);\n          const _r0 = i0.ɵɵreference(4);\n          const _r1 = i0.ɵɵreference(6);\n          return i0.ɵɵresetView(ctx.registerClick(_r0, _r1));\n        });\n        i0.ɵɵtext(8, \"Login\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"a\", 6);\n        i0.ɵɵtext(10, \"Register\");\n        i0.ɵɵelementEnd()();\n      }\n    },\n    styles: [\"@import\\\"https://fonts.googleapis.com/css2?family=Roboto&display=swap\\\";.login[_ngcontent-%COMP%]{padding:15px;margin:auto;width:400px;box-shadow:0 0 10px 3px #000;background-color:#2d3436b3;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:right;border-radius:1rem}h1[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}button[_ngcontent-%COMP%]{padding:12px 20px;margin-top:10px;cursor:pointer;font-size:16px;font-weight:700;background-color:#57657488;color:#000;border:none;border-radius:5px;box-shadow:0 3px 6px #0000004d;transition:all .3s ease-in-out}button[_ngcontent-%COMP%]:hover{background-color:#222f3e;color:#fff;box-shadow:0 6px 12px #0000004d}a[_ngcontent-%COMP%]{background-color:#2d3436;position:relative;right:-150px;padding:5px;color:#000;text-decoration:none;box-shadow:0 3px 6px #0000004d;transition:all .3s ease-in-out}a[_ngcontent-%COMP%]:hover{box-shadow:0 6px 12px #2d3436;color:#fff}input[_ngcontent-%COMP%]{resize:none;background-color:#2c3a47;box-shadow:0 0 10px 1px #000;font-family:Arial,Helvetica,sans-serif;border:#596275;margin:10px;width:330px;height:15px}.textarea-as-input[_ngcontent-%COMP%]{display:block;transition:all .2s ease-in-out;width:100%;padding:.5em;border:1px solid black;color:#fff;background-color:#2d3436;border-radius:4px;font-size:1em;line-height:1.5;width:330px;height:15px;resize:none}.textarea-as-input[_ngcontent-%COMP%]:hover{box-shadow:0 0 10px 1px #add8e6}.textarea-as-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 10px 1px #add8e6}\"]\n  });\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}